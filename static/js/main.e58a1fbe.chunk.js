(this.webpackJsonpsquart=this.webpackJsonpsquart||[]).push([[0],{294:function(e,t){},295:function(e,t){},303:function(e,t){},306:function(e,t){},307:function(e,t){},318:function(e,t){},326:function(e,t,n){},327:function(e,t,n){"use strict";n.r(t);var a=n(31),c=n.n(a),r=n(261),s=n.n(r),i=n(6),o=n(154),u=n(50),d=n(4),l=n.n(d),j=n(12),b=n(164),p=(n(287),n(328),{apiKey:"AIzaSyAazUt3acVM4gtILhT1XyMalwdglCeQqlc",authDomain:"squart-ad5a9.firebaseapp.com",databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/squat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAazUt3acVM4gtILhT1XyMalwdglCeQqlc",REACT_APP_AUTH_DOMAIN:"squart-ad5a9.firebaseapp.com",REACT_APP_PROJECT_ID:"squart-ad5a9",REACT_APP_STORAGE_BUCKET:"quart-ad5a9.appspot.com",REACT_APP_MESSAGE_ID:"386121003304",REACT_APP_APP_ID:"1:386121003304:web:065140ff988d4b0d2be01d",REACT_APP_MEASUREMENT_ID:"G-H354T1CCJN"}).REACT_APP_DATABASE_URL,projectId:"squart-ad5a9",storageBucket:"quart-ad5a9.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/squat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAazUt3acVM4gtILhT1XyMalwdglCeQqlc",REACT_APP_AUTH_DOMAIN:"squart-ad5a9.firebaseapp.com",REACT_APP_PROJECT_ID:"squart-ad5a9",REACT_APP_STORAGE_BUCKET:"quart-ad5a9.appspot.com",REACT_APP_MESSAGE_ID:"386121003304",REACT_APP_APP_ID:"1:386121003304:web:065140ff988d4b0d2be01d",REACT_APP_MEASUREMENT_ID:"G-H354T1CCJN"}).REACT_APP_MESSAGIN_ID,appId:"1:386121003304:web:065140ff988d4b0d2be01d"});b.a.initializeApp(p);var O,h,f,m=b.a,x=b.a.auth(),_=b.a.firestore(),A=n(29),E=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=(t[0],t[1],Object(a.useState)("")),c=Object(i.a)(n,2),r=(c[0],c[1],Object(a.useState)(!0)),s=Object(i.a)(r,2),o=(s[0],s[1],Object(a.useState)("")),u=Object(i.a)(o,2),d=(u[0],u[1],function(){var e=Object(j.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?a=new m.auth.GoogleAuthProvider:"github"===n&&(a=new m.auth.GithubAuthProvider),e.next=4,x.signInWithPopup(a);case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(A.jsxs)("div",{children:[Object(A.jsx)("div",{class:"title",children:"Who is Squat King in this ground?! "}),Object(A.jsxs)("div",{class:"auth",children:[Object(A.jsx)("button",{onClick:d,name:"google",children:"Continue with Google"}),Object(A.jsx)("button",{onClick:d,name:"github",children:"Continue with Github"})]})]})},g=n(20),v=n(211),S=(n(166),n(165)),T="https://teachablemachine.withgoogle.com/models/aj8L1qvCM/",P="stand",y="Ready!!",C=0,w=T+"model.json",I=T+"metadata.json",R=450,N=new Date,q=function(e){var t=e.userObj,n=document.getElementById("score"),c=document.getElementById("sentence"),r=Object(a.useState)(""),s=Object(i.a)(r,2),o=(s[0],s[1],Object(a.useState)([])),u=Object(i.a)(o,2),d=u[0],b=u[1],p=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.collection("nweets").get();case 2:e.sent.forEach((function(e){var t=Object(v.a)(Object(v.a)({},e.data()),{},{id:e.id});b((function(e){return[t].concat(Object(g.a)(e))}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){p()}),[]);var m=Object(a.useState)(t.displayName),x=Object(i.a)(m,2);x[0],x[1];function E(){return(E=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.load(w,I);case 2:return O=e.sent,O.getTotalClasses(),n=document.getElementById("score"),c=document.getElementById("sentence"),y="Start!!",c.innerHTML=y,h=new S.Webcam(R,R,true),e.next=11,h.setup();case 11:return e.next=13,h.play();case 13:window.requestAnimationFrame(T),N=new Date,(t=document.getElementById("canvas")).width=R,t.height=R,f=t.getContext("2d");case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return q.apply(this,arguments)}function q(){return(q=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.update(),e.next=3,D();case 3:window.requestAnimationFrame(T);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return k.apply(this,arguments)}function k(){return(k=Object(j.a)(l.a.mark((function e(){var t,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.getElementById("score"),c=document.getElementById("sentence"),e.next=4,O.estimatePose(h.canvas);case 4:return t=e.sent,a=t.pose,r=t.posenetOutput,e.next=9,O.predict(r);case 9:(s=e.sent)[0].probability.toFixed(2)>.9?("squat"===P&&(C++,y="Success!",n.innerHTML=C,c.innerHTML=y),P="stand"):s[1].probability.toFixed(2)>.9?(P="squat",c.innerHTML="Squat!"):s[2].probability.toFixed(2)>.9&&"squat"!=P?"squat"!==P&&"stand"!==P||(c.innerHTML="Benting...checking pose!"):c.innerHTML=y="Watching... ",M(a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){if(h.canvas&&(f.drawImage(h.canvas,0,0),e)){S.drawKeypoints(e.keypoints,.5,f),S.drawSkeleton(e.keypoints,.5,f)}}function L(){return(L=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.collection("nweets").add({text:C,createdAt:N.toUTCString(),creatorId:t.uid,nickname:t.displayName});case 2:C=0,P="stand",window.location.reload();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){_.collection("nweets").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(v.a)({id:e.id},e.data())}));b(t)}))}),[]),Object(A.jsxs)("div",{children:[Object(A.jsxs)("div",{className:"guide_box",children:[Object(A.jsx)("div",{className:"guide1",children:"Step1) Start \ubc84\ud2bc\uc744 \ub20c\ub7ec \uc2a4\ucffc\ud2b8\ub97c \uc2dc\uc791\ud558\uc138\uc694!!"}),Object(A.jsx)("div",{className:"guide2",children:"Step2) \uc67c\ucabd\uc744 \ubc14\ub77c\ubcf4\uace0 \uc815\uc790\uc138\ub85c \uc2a4\ucffc\ud2b8\ub97c \ud558\uc2dc\uba74 \uac2f\uc218\uac00 \uce74\uc6b4\ud2b8\ub429\ub2c8\ub2e4!!"}),Object(A.jsx)("div",{className:"guide3",children:"Step3) \uc6b4\ub3d9\uc744 \ub9c8\uce5c \ud6c4 End\ub97c \ub204\ub9ac\uc2dc\uba74 \ub2f9\uc2e0\uc758 \uae30\ub85d\uc774 \uac31\uc2e0\ub429\ub2c8\ub2e4!!"})]}),Object(A.jsxs)("div",{className:"main_box",children:[Object(A.jsxs)("div",{className:"screen",children:[Object(A.jsx)("button",{type:"button",onClick:function(){return E.apply(this,arguments)},children:"Start"}),Object(A.jsx)("button",{type:"button",onClick:function(){return L.apply(this,arguments)},children:"End"}),Object(A.jsx)("div",{children:Object(A.jsx)("canvas",{id:"canvas"})})]}),Object(A.jsxs)("div",{className:"score-container",children:[Object(A.jsx)("div",{className:"sentence",children:Object(A.jsx)("span",{id:"sentence",children:y})}),Object(A.jsx)("div",{className:"score",id:"score",children:Object(A.jsx)("span",{id:"sentence",children:C})})]})]}),Object(A.jsx)("div",{className:"feed",children:d.map((function(e){return Object(A.jsx)("div",{children:Object(A.jsx)("h4",{children:e.nickname+"  did squat totally "+e.text+" counts ("+e.createdAt+")"})},e.id)}))})]})},D=function(e){var t=e.userObj,n=Object(u.f)(),c=Object(a.useState)(t.displayName),r=Object(i.a)(c,2),s=r[0],o=r[1],d=function(){var e=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.displayName===s){e.next=4;break}return e.next=4,t.updateProfile({displayName:s});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("form",{onSubmit:d,children:[Object(A.jsx)("input",{onChange:function(e){var t=e.target.value;o(t)},type:"text",placeholder:"Display name",value:s}),Object(A.jsx)("input",{type:"submit",value:"Update Profile"})]}),Object(A.jsx)("button",{onClick:function(){x.signOut(),n.push("/")},children:"Log Out"})]})},k=function(e){e.userObj;return Object(A.jsx)("nav",{className:"nav",children:Object(A.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(A.jsx)("li",{className:"home_link",children:Object(A.jsx)(o.b,{to:"/",style:{marginRight:10},children:"Home"})}),Object(A.jsx)("li",{className:"profile_link",children:Object(A.jsx)(o.b,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center"},children:"Profile"})})]})})},M=function(e){var t=e.isLoggedIn,n=e.userObj;return Object(A.jsxs)(o.a,{children:[t&&Object(A.jsx)(k,{userObj:n}),Object(A.jsx)(u.c,{children:t?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(u.a,{exact:!0,path:"/",children:Object(A.jsx)(q,{userObj:n})}),Object(A.jsx)(u.a,{exact:!0,path:"/profile",children:Object(A.jsx)(D,{userObj:n})})]}):Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(u.a,{exact:!0,path:"/",children:Object(A.jsx)(E,{})})})})]})};var L=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(i.a)(r,2),o=s[0],u=s[1],d=Object(a.useState)(null),l=Object(i.a)(d,2),j=l[0],b=l[1];return Object(a.useEffect)((function(){x.onAuthStateChanged((function(e){e?(u(!0),b(e)):u(!1),c(!0)}))}),[]),Object(A.jsx)(A.Fragment,{children:n?Object(A.jsx)(M,{isLoggedIn:o,userObj:j}):"Initializing..."})};n(326);s.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(L,{})}),document.getElementById("root"))}},[[327,1,2]]]);
//# sourceMappingURL=main.e58a1fbe.chunk.js.map