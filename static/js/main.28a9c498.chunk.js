(this.webpackJsonpsquart=this.webpackJsonpsquart||[]).push([[0],{294:function(e,t){},295:function(e,t){},303:function(e,t){},306:function(e,t){},307:function(e,t){},318:function(e,t){},326:function(e,t,n){"use strict";n.r(t);var a=n(31),c=n.n(a),r=n(261),i=n.n(r),s=n(6),o=n(154),u=n(50),d=n(4),j=n.n(d),l=n(12),b=n(164),p=(n(287),n(327),{apiKey:"AIzaSyAazUt3acVM4gtILhT1XyMalwdglCeQqlc",authDomain:"squart-ad5a9.firebaseapp.com",databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/squat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAazUt3acVM4gtILhT1XyMalwdglCeQqlc",REACT_APP_AUTH_DOMAIN:"squart-ad5a9.firebaseapp.com",REACT_APP_PROJECT_ID:"squart-ad5a9",REACT_APP_STORAGE_BUCKET:"quart-ad5a9.appspot.com",REACT_APP_MESSAGE_ID:"386121003304",REACT_APP_APP_ID:"1:386121003304:web:065140ff988d4b0d2be01d",REACT_APP_MEASUREMENT_ID:"G-H354T1CCJN"}).REACT_APP_DATABASE_URL,projectId:"squart-ad5a9",storageBucket:"quart-ad5a9.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/squat",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAazUt3acVM4gtILhT1XyMalwdglCeQqlc",REACT_APP_AUTH_DOMAIN:"squart-ad5a9.firebaseapp.com",REACT_APP_PROJECT_ID:"squart-ad5a9",REACT_APP_STORAGE_BUCKET:"quart-ad5a9.appspot.com",REACT_APP_MESSAGE_ID:"386121003304",REACT_APP_APP_ID:"1:386121003304:web:065140ff988d4b0d2be01d",REACT_APP_MEASUREMENT_ID:"G-H354T1CCJN"}).REACT_APP_MESSAGIN_ID,appId:"1:386121003304:web:065140ff988d4b0d2be01d"});b.a.initializeApp(p);var O,h,f,m,x,A=b.a,E=b.a.auth(),_=b.a.firestore(),v=n(30),g=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=(t[0],t[1],Object(a.useState)("")),c=Object(s.a)(n,2),r=(c[0],c[1],Object(a.useState)(!0)),i=Object(s.a)(r,2),o=(i[0],i[1],Object(a.useState)("")),u=Object(s.a)(o,2),d=(u[0],u[1],function(){var e=Object(l.a)(j.a.mark((function e(t){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?a=new A.auth.GoogleAuthProvider:"github"===n&&(a=new A.auth.GithubAuthProvider),e.next=4,E.signInWithPopup(a);case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{class:"title",children:"Who is Squat King in this ground?! "}),Object(v.jsxs)("div",{class:"auth",children:[Object(v.jsx)("button",{onClick:d,name:"google",children:"Continue with Google"}),Object(v.jsx)("button",{onClick:d,name:"github",children:"Continue with Github"})]})]})},S=n(20),T=n(211),P=(n(166),n(165)),C="https://teachablemachine.withgoogle.com/models/aj8L1qvCM/",y="stand",w="Ready!!",I=0,R=C+"model.json",q=C+"metadata.json",N=200,D=new Date,M=function(e){var t=e.userObj,n=document.getElementById("score"),c=document.getElementById("sentence"),r=Object(a.useState)(""),i=Object(s.a)(r,2),o=(i[0],i[1],Object(a.useState)([])),u=Object(s.a)(o,2),d=u[0],b=u[1],p=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.collection("nweets").get();case 2:e.sent.forEach((function(e){var t=Object(T.a)(Object(T.a)({},e.data()),{},{id:e.id});b((function(e){return[t].concat(Object(S.a)(e))}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){p()}),[]);var A=Object(a.useState)(t.displayName),E=Object(s.a)(A,2);E[0],E[1];function g(){return(g=Object(l.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.load(R,q);case 2:return O=e.sent,x=O.getTotalClasses(),n=document.getElementById("score"),c=document.getElementById("sentence"),w="Start!!",c.innerHTML=w,h=new P.Webcam(N,N,true),e.next=11,h.setup();case 11:return e.next=13,h.play();case 13:for(window.requestAnimationFrame(C),D=new Date,(t=document.getElementById("canvas")).width=N,t.height=N,f=t.getContext("2d"),m=document.getElementById("label-container"),a=0;a<x;a++)m.appendChild(document.createElement("div"));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return M.apply(this,arguments)}function M(){return(M=Object(l.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.update(),e.next=3,k();case 3:window.requestAnimationFrame(C);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return L.apply(this,arguments)}function L(){return(L=Object(l.a)(j.a.mark((function e(){var t,a,r,i,s,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.getElementById("score"),c=document.getElementById("sentence"),e.next=4,O.estimatePose(h.canvas);case 4:return t=e.sent,a=t.pose,r=t.posenetOutput,e.next=9,O.predict(r);case 9:for((i=e.sent)[0].probability.toFixed(2)>.9?("squat"===y&&(I++,w="Success!",n.innerHTML=I,c.innerHTML=w),y="stand"):i[1].probability.toFixed(2)>.9?(y="squat",c.innerHTML="Squat!"):i[2].probability.toFixed(2)>.9&&"squat"!=y?"squat"!==y&&"stand"!==y||(c.innerHTML="Benting...checking pose!"):c.innerHTML=w="Watching... ",s=0;s<x;s++)o=i[s].className+": "+i[s].probability.toFixed(2),m.childNodes[s].innerHTML=o;H(a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){if(h.canvas&&(f.drawImage(h.canvas,0,0),e)){P.drawKeypoints(e.keypoints,.5,f),P.drawSkeleton(e.keypoints,.5,f)}}function U(){return(U=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.collection("nweets").add({text:I,createdAt:D.toUTCString(),creatorId:t.uid,nickname:t.displayName});case 2:I=0,y="stand",window.location.reload();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){_.collection("nweets").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(T.a)({id:e.id},e.data())}));b(t)}))}),[]),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"title",children:"Who is Squat King in this ground?! "}),Object(v.jsx)("div",{className:"guide1",children:"Step1) Start \ubc84\ud2bc\uc744 \ub20c\ub7ec \uc2a4\ucffc\ud2b8\ub97c \uc2dc\uc791\ud558\uc138\uc694!!"}),Object(v.jsx)("div",{className:"guide2",children:"Step2) \uc67c\ucabd\uc744 \ubc14\ub77c\ubcf4\uace0 \uc815\uc790\uc138\ub85c \uc2a4\ucffc\ud2b8\ub97c \ud558\uc2dc\uba74 \uac2f\uc218\uac00 \uce74\uc6b4\ud2b8\ub429\ub2c8\ub2e4!!"}),Object(v.jsx)("div",{className:"guide3",children:"Step3) \uc6b4\ub3d9\uc744 \ub9c8\uce5c \ud6c4 End\ub97c \ub204\ub9ac\uc2dc\uba74 \ub2f9\uc2e0\uc758 \uae30\ub85d\uc774 \uac31\uc2e0\ub429\ub2c8\ub2e4!!"}),Object(v.jsx)("button",{type:"button",onClick:function(){return g.apply(this,arguments)},children:"Start"}),Object(v.jsx)("button",{type:"button",onClick:function(){return U.apply(this,arguments)},children:"End"}),Object(v.jsx)("div",{children:Object(v.jsx)("canvas",{id:"canvas"})}),Object(v.jsx)("div",{id:"label-container"}),Object(v.jsxs)("div",{className:"score-container",children:[Object(v.jsx)("div",{className:"sentence",id:"sentence",children:w}),Object(v.jsx)("div",{className:"score",id:"score",children:I})]}),Object(v.jsx)("div",{children:d.map((function(e){return Object(v.jsx)("div",{children:Object(v.jsx)("h4",{children:e.nickname+"  did squat totally "+e.text+" counts ("+e.createdAt+")"})},e.id)}))})]})},k=function(e){var t=e.userObj,n=Object(u.f)(),c=Object(a.useState)(t.displayName),r=Object(s.a)(c,2),i=r[0],o=r[1],d=function(){var e=Object(l.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.displayName===i){e.next=4;break}return e.next=4,t.updateProfile({displayName:i});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("form",{onSubmit:d,children:[Object(v.jsx)("input",{onChange:function(e){var t=e.target.value;o(t)},type:"text",placeholder:"Display name",value:i}),Object(v.jsx)("input",{type:"submit",value:"Update Profile"})]}),Object(v.jsx)("button",{onClick:function(){E.signOut(),n.push("/")},children:"Log Out"})]})},L=function(e){e.userObj;return Object(v.jsx)("nav",{className:"nav",children:Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsx)(o.b,{to:"/",children:"Home"})}),Object(v.jsx)("li",{children:Object(v.jsx)(o.b,{to:"/profile",children:"Profile"})})]})})},H=function(e){var t=e.isLoggedIn,n=e.userObj;return Object(v.jsxs)(o.a,{children:[t&&Object(v.jsx)(L,{userObj:n}),Object(v.jsx)(u.c,{children:t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(u.a,{exact:!0,path:"/",children:Object(v.jsx)(M,{userObj:n})}),Object(v.jsx)(u.a,{exact:!0,path:"/profile",children:Object(v.jsx)(k,{userObj:n})})]}):Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(u.a,{exact:!0,path:"/",children:Object(v.jsx)(g,{})})})})]})};var U=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),i=Object(s.a)(r,2),o=i[0],u=i[1],d=Object(a.useState)(null),j=Object(s.a)(d,2),l=j[0],b=j[1];return Object(a.useEffect)((function(){E.onAuthStateChanged((function(e){e?(u(!0),b(e)):u(!1),c(!0)}))}),[]),Object(v.jsx)(v.Fragment,{children:n?Object(v.jsx)(H,{isLoggedIn:o,userObj:l}):"Initializing..."})};i.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(U,{})}),document.getElementById("root"))}},[[326,1,2]]]);
//# sourceMappingURL=main.28a9c498.chunk.js.map